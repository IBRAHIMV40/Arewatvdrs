<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hausa Movies</title>
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* CSS remains the same as before */
        :root {
            --bg-color: #141414;
            --text-color: #ffffff;
            --card-bg: #2c2c2c;
            --border-color: #444;
            --primary-color: #00b300;
            --light-bg: #2c2c2c;
            --gradient-3: linear-gradient(to right, #004d00, #00b300);
            --text-muted: #aaaaaa;
            --gradient-1: linear-gradient(to right, #004d00, #00b300);
        }
        
        /* Hide all scrollbars globally */
        * {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* IE and Edge */
        }
        *::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Edge */
        }
        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
        }
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 48px;
            background: linear-gradient(to right, #141414, #141414);
            display: flex;
            border: 1px solid #333;
            border-radius: 0px;
            flex-direction: column;
            align-items: center;
            padding: 0px 0px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        /* Logo Image */
        .logo img {
            height: 45px;
            border-radius: 8px;
            margin-left: 6px;
            border: 1px solid #;
        }
        .search-container {
            display: flex;
            align-items: center;
            background-color: #333;
            border: 2px solid #444;
            border-radius: 18px;
            padding: 5px 5px;
            margin-right: 7px;
            width: fit-content;
        }
        .search-container i {
            color: #fff;
            margin-right: 8px;
            font-size: 16px;
        }
        #search-bar {
            border: none;
            outline: none;
            background: transparent;
            font-size: 14px;
            color: #fff;
            width: 160px;
        }
        .icons {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .history-icon {
            font-size: 21px;
            margin-right: 10px;
            cursor: pointer;
            color: #777777;
            position: relative;
        }
        .history-icon:hover {
            color: #00b300;
        }
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff0000;
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* History Modal */
        .history-modal {
            display: none;
            position: fixed;
            top: 80px;
            right: 10px;
            width: 320px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            padding: 10px;
        }
        .history-modal.open {
            display: block;
        }
        .history-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .history-modal-header h3 {
            font-size: 16px;
            margin: 0;
            color: #333;
        }
        .history-modal-header button {
            background: none;
            border: none;
            color: #333;
            font-size: 16px;
            cursor: pointer;
        }
        .history-modal-header button:hover {
            color: #007bff;
        }
        .history-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .history-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        .history-item:last-child {
            border-bottom: none;
        }
        .history-item img {
            width: 80px;
            height: 115px;
            object-fit: cover;
            border-radius: 5px;
        }
        .history-item .content {
            flex: 1;
        }
        .history-item h4 {
            font-size: 14px;
            margin: 0;
            color: #333;
        }
        .history-item p {
            font-size: 0px;
            margin: 0;
            color: #777;
        }
        .clear-history-button {
            width: 100%;
            background: linear-gradient(to right, #004d00, #00b300);
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
        }
        .clear-history-button:hover {
            background-color: #00b300;
        }
        
        /* Carousel Styles */
        .carousel-container {
            width: 100%;
            max-width: 600px;
            overflow: hidden;
            position: relative;
            border-radius: 10px;
            touch-action: pan-y;
            height: 480px; /* Fixed height */
            margin: 0 auto 15px; /* Centered with margin */
            z-index: 10;
        }
        .carousel {
            display: flex;
            transition: transform 0.4s ease-in-out;
            will-change: transform;
            height: 100%;
        }
        .slide {
            min-width: 100%;
            position: relative;
            user-select: none;
            height: 100%;
            cursor: pointer;
        }
        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }
        .overlay {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            border-radius: 10px;
        }
        .video-title {
            position: absolute;
            bottom: 30px;
            left: 15px;
            font-size: 18px;
            font-weight: bold;
            color: white;
        }
        .download-btn {
            position: absolute;
            bottom: 20px;
            right: 15px;
            background-color: rgba(30, 30, 30, 0.1);
            color: white;
            font-size: 14px;
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .download-btn img {
            width: 20px;
            height: 28px;
        }
        .dots {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
        }
        .dot {
            width: 12px;
            height: 12px;
            background-color: gray;
            border-radius: 50%;
            cursor: pointer;
            transition: 0.3s;
        }
        .dot.active {
            background-color: white;
        }
        
        /* Discover Section */
        .discover-container {
            margin-top: 38px;
            padding: 8px;
        }
        .discover-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .discover-scroll {
            display: flex;
            overflow-x: auto;
            gap: 8px;
            padding-bottom: 10px;
        }
        .discover-item {
            flex: 0 0 auto;
            width: 130px;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            text-align: center;
            position: relative;
            cursor: pointer;
        }
        .discover-item img {
            width: 100%;
            aspect-ratio: 16 / 23;
            object-fit: cover;
            border-radius: 5px;
        }
        .discover-item .content {
            padding: 0px;
        }
        .discover-item .content h2 {
            font-weight: 400;
            font-size: 0.60rem;
            margin: 0;
            color: var(--text-color);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        .discover-item .content p {
            font-size: 0px;
            color: var(--text-muted);
            margin: 0px 0;
        }
        /* Category Section */
        .category-container {
            margin-top: 8px;
            padding: 2px;
        }
        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            margin-left: 7px;
            color: var(--text-color);
            justify-content: space-between;
            align-items: center;
        }
        .category-title button {
            background-color: var(--light-bg);
            border: none;
            padding: 5px 10px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            cursor: pointer;
            font-size: 13px;
        }
        .category-title button:hover {
            background-color: var(--light-bg);
        }
        .category-scroll {
            display: flex;
            overflow-x: auto;
            gap: 4px;
            padding-bottom: 10px;
        }
        
        .frame {
            flex: 0 0 auto;
            width: 112px;
            background-color: var(--card-bg);
            border-radius: 8px;
            margin-left: 4px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            text-align: center;
            cursor: pointer;
        }
        .frame img {
            width: 100%;
            aspect-ratio: 16 / 24;
            object-fit: cover;
            border-radius: 5px;
        }
        .frame .content h2 {
            font-weight: 400;
            font-size: 0.60rem;
            color: var(--text-color);
            text-align: center;
            margin-top: 0px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        /* Grid Layout for View All and Search Results */
        .grid-container {
            margin-top: 50px;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }
        .grid-container .frame {
            width: 100%;
        }
        /* Navigation Modal Styles */
        .nav-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height:  90%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        .nav-content {
            background-color: #141414;
            width: 100%;
            height: 100%;
            max-width: 800px;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .nav-header {
            background-color: #141414;
            color: #fff;
            padding: 10px;
            text-align: right;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-header button {
            background: none;
            border: none;
            color: #fff;
            font-size: 20px;
            border: 1px solid #333;
            border-radius: 50px;
            cursor: pointer;
            padding: 0 10px;
            margin: 0 5px;
        }
        .nav-header button:hover {
            color: #fff;
        }
        .save-btn {
            background-color: #00b300;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 14px;
        }
        .save-btn:hover {
            background-color: #ff0000;
        }
        .nav-body {
            flex-grow: 1;
            overflow: hidden;
            position: relative;
        }
        .nav-body iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Episode Footer Styles */
        .episode-footer {
            background: #141414;    
            padding: 20px 0 10px;
            border-top: 1px solid var(--border-color);
            z-index: 310;
        }
        .episode-header {
            display: flex;
            padding: 0 20px 15px;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        .episode-title {
            font-size: 18px;
            font-weight: 700;
            max-width: 70%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: white;
        }
        .episode-count {
            font-size: 16px;
            color: var(--primary-color);
            font-weight: 600;
        }
        .episode-scroller {
            display: flex;
            overflow-x: auto;
            padding: 15px 20px;
            gap: 15px;
        }
        .episode-btn {
            flex: 0 0 auto;
            width: 65px;
            height: 65px;
            border-radius: 15px;
            background: #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .episode-btn:hover {
            background: var(--light-bg);
            transform: translateY(-3px);
        }
        .episode-btn.active {
            background: var(--gradient-3);
            border-color: white;
            transform: scale(1.1);
            color: white;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
        }
        .episode-btn .ep-num {
            font-size: 12px;
            position: absolute;
            top: 5px;
            left: 5px;
            color: var(--text-muted);
        }
        .episode-btn.active .ep-num {
            color: white;
            font-weight: 700;
        }
        
        /* Season Navigation Buttons */
        .season-nav-btn {
            background: var(--gradient-1) !important;
            color: white !important;
            border: 2px solid white !important;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 65px;
            height: 65px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }
        
        .season-nav-btn .season-nav-text {
            position: absolute;
            top: 2px;
            left: 8px;
            font-size: 12px;
            font-weight: 700;
            color: white;
        }
        
        .season-nav-btn .season-number {
            font-size: 20px;
            font-weight: 700;
        }
        
        .season-nav-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 77, 77, 0.5);
        }
        
        .season-nav-btn.prev-season {
            margin-right: 5px;
        }
        
        .season-nav-btn.next-season {
            margin-left: 5px;
        }
        
        /* Notification Styles */
        .notification {
            padding: 20px 25px;
            font-size: 13px;
            font-weight: bold;
            color: #333;
            border-radius: 8px;
            border: 1px solid #ccc;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            animation: fadeInOut 3s ease-in-out;
        }
        .notification.success {
            background-color: #fff;
        }
        .notification.warning {
            background-color: #fff;
        }
        .notification.info {
            background-color: #2196f3;
        }
        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translate(-50%, -60%);
            }
            10% {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
            90% {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
        }
        #social-media {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }
        /* Social Media Descriptions */
        #social-media-descriptions {
            text-align: center;
            margin-bottom: 5px;
        }
        #social-media-descriptions h2 {
            font-size: 15px;
            color: #ccc;
            margin: 5;
        }
        /* Social Media Icons */
        #social-media {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(to right, #004d00, #00b300);
            color: white;
            font-size: 18px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }
        .social-icon:hover {
            background-color: #555;
        }
        .notification-bar {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            background: linear-gradient(to right, #004d00, #00b300);
            color: white;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 1000;
        }
        .notification-bar img {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            margin-right: 10px;
        }
        .notification-text {
            flex: 1;
            font-size: 11px;
            text-align: left;
        }
        .notification-button {
            background: #ccff00;
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            border: none;
        }
        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            margin-left: 10px;
        }
        /* Sidebar Modal */
        .sidebar-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 300px;
            height: 100%;
            background-color: #fff;
            border-right: 1px solid #ccc;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            overflow-y: auto;
            padding: 10px;
        }
        .sidebar-modal.open {
            display: block;
        }
        .sidebar-modal-header {
            display: flex;
            background: linear-gradient(to right, #004d00, #00b300);
            justify-content: space-between;
            align-items: center;
            padding: 6px;
            border-radius: 20px;
            border-bottom: 1px solid #ccc;
            margin-bottom: 10px;
        }
        .sidebar-modal-header h3 {
            font-size: 18px;
            margin: 0;
            color: #333;
        }
        .sidebar-modal-header button {
            background: #fff;
            border: none;
            color: #333;
            border-bottom: 1px solid #ccc;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
        }
        .sidebar-modal-header button:hover {
            color: #007bff;
        }
        .sidebar-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        .sidebar-item img {
            width: 30px;
            height: 30px;
            object-fit: cover;
            border-radius: 5px;
        }
        .sidebar-item span {
            font-size: 14px;
            color: #333;
        }
        /* Bars Icon */
        .bars-icon {
            font-size: 22px;
            cursor: pointer;
            color: #777777;
            margin-left: 15px;
        }
        .bars-icon:hover {
            color: #00b300;
        }
        /* Logos Section */
        .logos-container {
            margin-top: 20px;
            padding: 10px;
        }
        .logos-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .logos-scroll {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 10px;
        }
        .logo-item {
            flex: 0 0 auto;
            width: 100px;
            height: 100px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            cursor: pointer;
        }
        .logo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        /* Bottom Navigation Bar */
        footer {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 0;
            border-radius: 0px;
            background-color: #141414;
            border-bottom: 1px solid #ddd;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        footer .nav-icon {
            flex: 1;
            text-align: center;
            color: #777777;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
            font-size: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        footer .nav-icon i {
            font-size: 21px;
            transition: 0.3s;
        }
        footer .nav-icon.active,
        footer .nav-icon:hover {
            color: #00b300;
        }
        footer .nav-icon.active i,
        footer .nav-icon:hover i {
            transform: scale(1.2);
        }
        /* Hide Footer */
        footer.hide {
            transform: translateY(100%);
            transition: transform 0.3s ease-in-out;
        }
        .profile-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .profile-item img {
            width: 100px;
            height: 100px;
            border-radius: 8px;
        }
        .profile-item h4 {
            margin: 0;
            font-size: 8px;
            color: #333;
        }
        .profile-item p {
            margin: 0;
            font-size: 6px;
            color: #777;
        }
        .profile-item button {
            background-color: #00b300;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }
        .profile-item button:hover {
            background-color: #008000;
        }
        /* Partners Section */
        .partners-container {
            margin-top: 15px;
            padding: 10px;
        }
        .partners-title {
            font-size: 18px;
            text-align: left;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .partners-scroll {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 10px;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            white-space: nowrap;
        }
        .partner-item {
            flex: 0 0 auto;
            width: 120px;
            text-align: center;
            cursor: pointer;
            scroll-snap-align: start;
        }
        .partner-item img {
            width: 120px;
            height: 160px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .partner-item:hover img {
            transform: scale(1.1);
        }
        .partner-title {
            font-size: 14px;
            margin-top: 5px;
            color: #333;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* New styles for added features */
        .filter-container {
            display: none;
            position: fixed;
            top: 60px;
            right: 10px;
            width: 280px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            padding: 15px;
        }
        .filter-container.open {
            display: block;
        }
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .filter-header h3 {
            font-size: 16px;
            margin: 0;
            color: #333;
        }
        .filter-header button {
            background: none;
            border: none;
            color: #333;
            font-size: 16px;
            cursor: pointer;
        }
        .filter-section {
            margin-bottom: 15px;
        }
        .filter-section h4 {
            font-size: 14px;
            margin-bottom: 8px;
            color: #333;
        }
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .filter-option {
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 15px;
            padding: 5px 10px;
            color: black;
            font-size: 12px;
            cursor: pointer;
        }
        .filter-option.active {
            background-color: #00b300;
            color: white;
        }
        .apply-filter-btn {
            width: 100%;
            background: linear-gradient(to right, #004d00, #00b300);
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        /* Download progress bar */
        .download-progress {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: none;
        }
        .download-progress.open {
            display: block;
        }
        .download-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .download-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        .download-percentage {
            font-size: 14px;
            color: #00b300;
        }
        .progress-bar {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #004d00, #00b300);
            width: 0%;
            transition: width 0.3s ease;
        }
        .download-actions {
            display: flex;
            justify-content: space-between;
        }
        .download-actions button {
            background: none;
            border: 1px solid #ddd;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .download-actions button.primary {
            background: linear-gradient(to right, #004d00, #00b300);
            color: white;
            border: none;
        }
        
        /* Video quality selector */
        .quality-selector {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            z-index: 100;
        }
        
        /* User profile section */
        .user-profile {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #00b300;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .user-info h3 {
            margin: 0 0 5px;
            font-size: 16px;
            color: #333;
            text-align: center;
        }
        .user-info p {
            margin: 0 0 10px;
            font-size: 12px;
            color: #777;
            text-align: center;
        }
        .edit-profile-btn {
            background-color: #00b300;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .edit-profile-btn i {
            font-size: 12px;
        }
        
        /* Video player controls */
        .player-controls {
            position: absolute;
            bottom: 0px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        }
        .player-controls button {
            background: none;
            border: none;
            color: #;
            font-size: 0px;
            cursor: pointer;
        }
        .player-timeline {
            flex: 1;
            height: 4px;
            background-color: rgba(255,255,255,0.3);
            margin: 0 15px;
            border-radius: 2px;
            position: relative;
        }
        .player-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: #00b300;
            width: 0%;
        }
        
        /* Edit Profile Modal */
        .edit-profile-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }
        .edit-profile-modal.open {
            display: flex;
        }
        .edit-profile-content {
            background-color: #fff;
            width: 90%;
            max-width: 400px;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .edit-profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .edit-profile-header h3 {
            font-size: 18px;
            margin: 0;
            color: #333;
        }
        .edit-profile-header button {
            background: none;
            border: none;
            color: #333;
            font-size: 16px;
            cursor: pointer;
        }
        .avatar-selection {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .avatar-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 5px;
            cursor: pointer;
            border: 2px solid transparent;
            overflow: hidden;
        }
        .avatar-option.selected {
            border-color: #00b300;
        }
        .avatar-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #333;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .save-profile-btn {
            width: 100%;
            background: linear-gradient(to right, #004d00, #00b300);
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        /* Ad container styles */
    .ad-container {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
        padding: 5px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        z-index: 1000;
    }
    .ad-content {
        display: flex;
        align-items: center;
        flex-grow: 1;
        overflow: hidden;
    }
    .app-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        overflow: hidden;
        margin-right: 15px;
        flex-shrink: 0;
    }
    .app-icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .ad-info {
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
    .app-name {
        font-weight: bold;
        font-size: 18px;
        color: var(--text-primary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 200px;
        margin-bottom: 6px;
    }
    .ad-meta {
        font-size: 14px;
        color: var(--text-secondary);
        white-space: nowrap;
    }
    .install-button {
        background: var(--gradient-1);
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 30px;
        font-weight: bold;
        cursor: pointer;
        text-decoration: none;
        margin-left: 15px;
        flex-shrink: 0;
        transition: all 0.3s ease;
    }
    .install-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(255, 77, 77, 0.4);
    }
    .sponsored {
        font-size: 12px;
        color: var(--text-muted);
        margin-right: 5px;
    }
    .ad-wrapper {
        display: flex;
        align-items: center;
        flex: 1;
        overflow: hidden;
    }
    </style>
</head>
<body>
    <header>
        <div class="header-top">
            <!-- Bars Icon -->
            <div class="bars-icon" onclick="toggleSidebarModal()">
                <i class="fas fa-bars"></i>
            </div>
            <!-- Logo as Image -->
            <div class="logo">
                <img src="https://ucarecdn.com/cee71935-3e43-44cb-a532-f962e8a311d1/-/preview/1000x1000/" alt="Hausa Movies Logo" />
            </div>
            <!-- History Icon -->
            <div class="history-icon" onclick="toggleHistoryModal()">
                <i class="fas fa-history"></i>
                <span class="notification-badge">3</span>
            </div>
            <!-- Search Bar Container -->
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="search-bar" placeholder="Search movies..." oninput="handleSearch()" />
                <i class="fas fa-filter" onclick="toggleFilterModal()" style="margin-left: 10px; cursor: pointer;"></i>
            </div>
        </div>
    </header>
    
    <!-- Filter Modal -->
    <div class="filter-container" id="filter-modal">
        <div class="filter-header">
            <h3>Filter & Sort</h3>
            <button onclick="toggleFilterModal()">✖</button>
        </div>
        <div class="filter-section">
            <h4>Category</h4>
            <div class="filter-options">
                <div class="filter-option active" data-category="All">All</div>
                <div class="filter-option" data-category="Action">Action</div>
                <div class="filter-option" data-category="Drama">Drama</div>
                <div class="filter-option" data-category="Comedy">Comedy</div>
                <div class="filter-option" data-category="Romance">Romance</div>
                <div class="filter-option" data-category="Thriller">Thriller</div>
            </div>
        </div>
        <div class="filter-section">
            <h4>Sort By</h4>
            <div class="filter-options">
                <div class="filter-option active" data-sort="Newest">Newest</div>
                <div class="filter-option" data-sort="Popular">Popular</div>
                <div class="filter-option" data-sort="Rating">Rating</div>
                <div class="filter-option" data-sort="A-Z">A-Z</div>
            </div>
        </div>
        <button class="apply-filter-btn" onclick="applyFilters()">Apply Filters</button>
    </div>
    
    <!-- Download Progress -->
    <div class="download-progress" id="download-progress">
        <div class="download-header">
            <div class="download-title">CUTAR KAI.mp4</div>
            <div class="download-percentage">45%</div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" style="width: 45%;"></div>
        </div>
        <div class="download-actions">
            <button>Pause</button>
            <button class="primary">Cancel</button>
        </div>
    </div>
    
    <!-- Sidebar Modal -->
    <div class="sidebar-modal" id="sidebar-modal">
        <div class="sidebar-modal-header">
            <h3></h3>
            <button onclick="toggleSidebarModal()">×</button>
        </div>
        
        <!-- User Profile Section -->
        <div class="user-profile">
            <div class="user-avatar" id="user-avatar">
                <i class="fas fa-user" style="font-size: 36px;"></i>
            </div>
            <div class="user-info">
                <h3 id="user-name">Hausa Movies User</h3>
                <p>Free Account</p>
            </div>
            <button class="edit-profile-btn" onclick="openEditProfileModal()">
                <i class="fas fa-edit"></i> Edit Profile
            </button>
        </div>
        
        <!-- Logos Section -->
        <div class="logos-container">
            <div class="logos-title">Our Partners</div>
            <div class="logos-scroll" id="logos-scroll"></div>
        </div>
        
        <div class="sidebar-list" id="sidebar-list">
            <!-- Previous sidebar items -->
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/18831/18831648.png" alt="Director Center">
                <span>Director Center</span>
            </div>
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/5303/5303479.png" alt="Earn Rewards">
                <span>Earn Rewards</span>
            </div>
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/9592/9592247.png" alt="Viewer Gift">
                <span>Viewer Gift</span>
            </div>
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/18392/18392966.png" alt="Online Service">
                <span>Online Service</span>
            </div>
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/2312/2312342.png" alt="Privacy Policy">
                <span>Privacy Policy</span>
            </div>
            <!-- New items -->
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/3405/3405247.png" alt="Settings">
                <span>Settings</span>
            </div>
            <div class="sidebar-item">
                <img src="https://cdn-icons-png.flaticon.com/128/2838/2838694.png" alt="Help">
                <span>Help & Support</span>
            </div>
        </div>
    </div>
    
    <!-- Edit Profile Modal -->
    <div class="edit-profile-modal" id="edit-profile-modal">
        <div class="edit-profile-content">
            <div class="edit-profile-header">
                <h3>Edit Profile</h3>
                <button onclick="closeEditProfileModal()">✖</button>
            </div>
            <div class="avatar-selection">
                <div class="avatar-option" data-avatar="1">
                    <img src="https://cdn-icons-png.flaticon.com/128/6997/6997666.png" alt="Avatar 1">
                </div>
                <div class="avatar-option" data-avatar="2">
                    <img src="https://cdn-icons-png.flaticon.com/128/6997/6997662.png" alt="Avatar 2">
                </div>
                <div class="avatar-option" data-avatar="3">
                    <img src="https://cdn-icons-png.flaticon.com/128/6997/6997661.png" alt="Avatar 3">
                </div>
                <div class="avatar-option" data-avatar="4">
                    <img src="https://cdn-icons-png.flaticon.com/128/6997/6997664.png" alt="Avatar 4">
                </div>
            </div>
            <div class="form-group">
                <label for="user-name-input">Name</label>
                <input type="text" id="user-name-input" placeholder="Enter your name">
            </div>
            <button class="save-profile-btn" onclick="saveProfile()">Save Changes</button>
        </div>
    </div>
    
    <div class="notification-bar" id="notification-bar">
        <img src="https://bit.ly/434z6xR" alt="App Logo">
        <div class="notification-text">Enjoy more movies download Hausa Movies app.</div>
        <button class="notification-button" onclick="window.open('https://www.appcreator24.com/app3501058-ks4rfa', '_blank')">OPEN</button>
        <button class="close-button" onclick="closeNotification()">✖</button>
    </div>
    <!-- History Modal -->
    <div class="history-modal" id="history-modal">
        <div class="history-modal-header">
            <h3>Recently Watched</h3>
            <button onclick="toggleHistoryModal()">✖</button>
        </div>
        <div class="history-list" id="history-list"></div>
        <button class="clear-history-button" onclick="clearHistory()">Clear All History</button>
    </div>
    <!-- Discover Section -->
    <div class="discover-container" id="discover-container">
        <div class="discover-title"></div>
        <!-- Carousel Section - Now inside discover section -->
        <div class="carousel-container">
            <div class="carousel" id="carousel"></div>
            <div class="dots" id="dots"></div>
        </div>
        <div class="discover-scroll" id="discover-scroll"></div>
    </div>        
    <!-- Categories Section -->
    <div id="categories-container"></div>
    <!-- Grid Layout for View All and Search Results -->
    <div id="grid-container" class="grid-container" style="display: none;"></div>
    <!-- Navigation Modal -->
    <div class="nav-container" id="video-nav">
        <div class="nav-content">
            <div class="nav-header">
                <button id="close-btn" onclick="closeNav()"><i class="fas fa-arrow-left"></i></button>
                <div>
                    <button id="share-btn" onclick="shareMovie()"><i class="fas fa-share-alt"></i> Share</button>
                    <button id="download-btn" onclick="downloadMovie()"><i class="fas fa-download"></i></button>
                    <button id="save-btn" class="save-btn" onclick="toggleSaveStatus()">Add to list</button>
                </div>
            </div>
            <div class="nav-body">
                <div style="position: relative; width: 100%; height: 100%;">
                    <button class="quality-selector">HD <i class="fas fa-chevron-down"></i></button>
                    <iframe id="video-player" src="" frameborder="0" allowfullscreen style="width: 100%; height: 100%;"></iframe>
                    <div class="player-controls">
                        <button><i class="fas fa-backward"></i></button>
                        <div class="player-timeline">
                            <div class="player-progress"></div>
                        </div>
                        <button><i class="fas fa-forward"></i></button>
                    </div>
                </div>
            </div>
            <!-- Episode Footer -->
            <div class="episode-footer" id="episode-footer" style="display: none;">
                <div class="episode-header">
                    <div class="episode-title" id="episode-title">Episodes</div>
                    <div class="episode-count" id="episode-count">0 Episodes</div>
                </div>
                <div class="episode-scroller" id="episode-scroller">
                    <!-- Episode buttons will be dynamically added here -->
                </div>
            </div>
        </div>
        <!-- Ad container below popular videos -->
  <div class="ad-container" id="adContainer" style="display: none;">
    <div class="ad-wrapper">
      <div class="ad-content" id="adContent"></div>
    </div>
    <a href="#" id="installButton" class="install-button" target="_blank">Install</a>
  </div>
    </div>
    
    <!-- Partners Section -->
    <div class="partners-container">
        <div class="partners-title">New Releases!</div>
        <div class="partners-scroll" id="partners-scroll"></div>
    </div>
    
    <!-- Social Media Descriptions -->
    <div id="social-media-descriptions">
        <h2>Follow us on social media:</h2>
    </div>
    <!-- Social Media Icons -->
    <div id="social-media">
        <a href="https://www.facebook.com/share/1AQXgVMP49/" target="_blank" class="social-icon">
            <i class="fab fa-facebook-f"></i>
        </a>
        <a href="#" target="_blank" class="social-icon">
            <i class="fab fa-twitter"></i>
        </a>
        <a href="#" target="_blank" class="social-icon">
            <i class="fab fa-telegram"></i>
        </a>
        <a href="#" target="_blank" class="social-icon">
            <i class="fab fa-instagram"></i>
        </a>
        <a href="#" target="_blank" class="social-icon">
            <i class="fab fa-youtube"></i>
        </a>
        <a href="#" target="_blank" class="social-icon">
            <i class="fab fa-whatsapp"></i>
        </a>
        <a href="#" target="_blank" class="social-icon">
            <i class="fab fa-tiktok"></i>
        </a>
    </div>
    <!-- Bottom Navigation Bar -->
    <footer>
        <div class="nav-icon" onclick="showHomeVideos()">
            <i class="fas fa-film"></i>
            <span>Movies</span>
        </div>
        <div class="nav-icon" onclick="showDiscoverAndCategories()">
            <i class="fas fa-compass"></i>
            <span>Discover</span>
        </div>
        <div class="nav-icon" onclick="showTrendingVideos()">
            <i class="fas fa-fire"></i>
            <span>Trending</span>
        </div>
        <div class="nav-icon" onclick="showMyList()">
            <i class="fas fa-list"></i>
            <span>My List</span>
        </div>
        <div class="nav-icon" onclick="showProfileSection()">
            <i class="fab fa-app-store"></i>
            <span>Apps</span>
        </div>
    </footer>
    <!-- External JavaScript files -->
    <script src="videos-data.js"></script>
    <script src="series-data.js"></script>
    <script src="profile-apps.js"></script>
    <script src="ads-data.js"></script>
    <script>
        // Initialize saved movies from localStorage
        let savedMovies = JSON.parse(localStorage.getItem('savedMovies')) || [];
        
        // Initialize user profile from localStorage
        let userProfile = JSON.parse(localStorage.getItem('userProfile')) || {
            name: 'Hausa Movies User',
            avatar: null
        };
        
        // Combine videos and series data
        const data = [...videosData, ...seriesData];
        
        // Track if we're currently in the video modal
        let inVideoModal = false;
        
        // Track if we're currently in a grid view
        let inGridView = false;
        
        // Track if we're currently in the filter modal
        let inFilterModal = false;
        
        // Track if we're currently in the history modal
        let inHistoryModal = false;
        
        // Track if we're currently in the sidebar modal
        let inSidebarModal = false;
        
        const logosData = [
            { imgUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIlQrAhJwP4oyweBiy8rHJngSeN7E2_gNWQjtqKDOiRQ&s", videoUrl: "https://darulfikr.com/" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/CumW3IY1mMg" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/SFtKVKoscqA" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/hJzZRl1C8X0" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/BjkncLAZu80" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/UPjyNg1mKAM" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/iTNyJse9fdk" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/siFLpeqOWDQ" },
            { imgUrl: "https://via.placeholder.com/100", videoUrl: "https://youtube.com/embed/Ma9xquhYyT0" },
        ];
        const createLogosSection = () => {
            const logosScroll = document.getElementById('logos-scroll');
            logosScroll.innerHTML = '';
            logosData.forEach(logo => {
                const logoItem = document.createElement('div');
                logoItem.className = 'logo-item';
                const img = document.createElement('img');
                img.src = logo.imgUrl;
                img.alt = 'Logo';
                logoItem.appendChild(img);
                logosScroll.appendChild(logoItem);
                // Add click event to open video
                logoItem.onclick = () => {
                    document.getElementById('video-nav').style.display = 'flex';
                    document.getElementById('video-player').src = logo.videoUrl;
                };
            });
        };
        // Call the function to create the logos section
        createLogosSection();
        
        // Function to toggle the sidebar modal
        const toggleSidebarModal = () => {
            const sidebarModal = document.getElementById('sidebar-modal');
            const historyModal = document.getElementById('history-modal');
            const filterModal = document.getElementById('filter-modal');
            
            // If history modal is open, close it first
            if (historyModal.classList.contains('open')) {
                historyModal.classList.remove('open');
                inHistoryModal = false;
            }
            
            // If filter modal is open, close it first
            if (filterModal.classList.contains('open')) {
                filterModal.classList.remove('open');
                inFilterModal = false;
            }
            
            // Toggle the sidebar modal
            sidebarModal.classList.toggle('open');
            inSidebarModal = !inSidebarModal;
            
            // If opening the sidebar modal, push state to history
            if (inSidebarModal) {
                history.pushState({ sidebarOpen: true }, '');
            }
        };
        
        // Function to toggle the history modal
        const toggleHistoryModal = () => {
            const historyModal = document.getElementById('history-modal');
            const sidebarModal = document.getElementById('sidebar-modal');
            const filterModal = document.getElementById('filter-modal');
            
            // If sidebar modal is open, close it first
            if (sidebarModal.classList.contains('open')) {
                sidebarModal.classList.remove('open');
                inSidebarModal = false;
            }
            
            // If filter modal is open, close it first
            if (filterModal.classList.contains('open')) {
                filterModal.classList.remove('open');
                inFilterModal = false;
            }
            
            // Toggle the history modal
            historyModal.classList.toggle('open');
            inHistoryModal = !inHistoryModal;
            
            // If opening the history modal, push state to history
            if (inHistoryModal) {
                history.pushState({ historyOpen: true }, '');
            }
        };
        
        // Function to toggle the filter modal
        const toggleFilterModal = () => {
            const filterModal = document.getElementById('filter-modal');
            const sidebarModal = document.getElementById('sidebar-modal');
            const historyModal = document.getElementById('history-modal');
            
            // If sidebar modal is open, close it first
            if (sidebarModal.classList.contains('open')) {
                sidebarModal.classList.remove('open');
                inSidebarModal = false;
            }
            
            // If history modal is open, close it first
            if (historyModal.classList.contains('open')) {
                historyModal.classList.remove('open');
                inHistoryModal = false;
            }
            
            // Toggle the filter modal
            filterModal.classList.toggle('open');
            inFilterModal = !inFilterModal;
            
            // If opening the filter modal, push state to history
            if (inFilterModal) {
                history.pushState({ filterOpen: true }, '');
            }
        };
        
        // Function to populate the sidebar with URL logos
        const populateSidebar = () => {
            const sidebarList = document.getElementById('sidebar-list');
            sidebarList.innerHTML = '';
            // Example list of URL logos (replace with your own data)
            const urlLogos = [
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/18831/18831648.png", name: "Director Center", url: "#" },
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/5303/5303479.png", name: "Earn Rewards", url: "#" },
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/9592/9592247.png", name: "Viewer Gift", url: "#" },
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/18392/18392966.png", name: "Online Service", url: "#" },
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/2312/2312342.png", name: "Privacy Policy", url: "#" },
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/3405/3405247.png", name: "Settings", url: "#" },
                { logoUrl: "https://cdn-icons-png.flaticon.com/128/2838/2838694.png", name: "Help & Support", url: "#" },
            ];
            urlLogos.forEach(item => {
                const sidebarItem = document.createElement('div');
                sidebarItem.className = 'sidebar-item';
                sidebarItem.onclick = () => window.open(item.url, '_blank');
                const img = document.createElement('img');
                img.src = item.logoUrl;
                img.alt = item.name;
                const span = document.createElement('span');
                span.textContent = item.name;
                sidebarItem.appendChild(img);
                sidebarItem.appendChild(span);
                sidebarList.appendChild(sidebarItem);
            });
        };
        // Call the function to populate the sidebar on page load
        populateSidebar();
        
        // Function to shuffle array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        // Create carousel using the data array
        const createCarousel = () => {
            const carousel = document.getElementById("carousel");
            const dotsContainer = document.getElementById("dots");
            carousel.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            // Shuffle the data array and take first 5 items for carousel
            const shuffledData = shuffleArray(data);
            const carouselData = shuffledData.slice(0, 5);
            
            carouselData.forEach((item, index) => {
                const slide = document.createElement("div");
                slide.className = "slide";
                slide.innerHTML = `
                    <img src="${item.imgUrl}" alt="${item.title}">
                    <div class="overlay"></div>
                    <div class="video-title">${item.title}</div>
                `;
                
                // Add click event to open modal
                slide.onclick = () => openVideoNav(item.videoUrl, item.title, item);
                
                carousel.appendChild(slide);
                
                const dot = document.createElement("div");
                dot.className = "dot";
                if (index === 0) dot.classList.add("active");
                dot.addEventListener("click", () => goToSlide(index));
                dotsContainer.appendChild(dot);
            });
        };
        
        const createDiscoverSection = () => {
            const discoverScroll = document.getElementById('discover-scroll');
            discoverScroll.innerHTML = '';
            
            // Shuffle the data array for discover section
            const shuffledData = shuffleArray(data);
            
            // Select the first 500000 videos for the Discover section
            const discoverData = shuffledData.slice(0, 500000);
            discoverData.forEach(item => {
                const discoverItem = document.createElement('div');
                discoverItem.className = 'discover-item';
                const img = document.createElement('img');
                img.src = item.imgUrl;
                img.alt = item.title;
                const content = document.createElement('div');
                content.className = 'content';
                content.innerHTML = `
                    <h2>${item.title}</h2>
                    <p>${item.description}</p>
                `;
                
                // Add click event to the entire discover item
                discoverItem.onclick = () => openVideoNav(item.videoUrl, item.title, item);
                
                discoverItem.appendChild(img);
                discoverItem.appendChild(content);
                discoverScroll.appendChild(discoverItem);
            });
        };
        const createCategories = () => {
            const categories = [...new Set(data.map(item => item.category))]; // Get unique categories
            const container = document.getElementById('categories-container');
            container.innerHTML = '';
            categories.forEach(category => {
                const categoryData = data.filter(item => item.category === category); // Use original data
                const categoryContainer = document.createElement('div');
                categoryContainer.className = 'category-container';
                const categoryTitle = document.createElement('div');
                categoryTitle.className = 'category-title';
                categoryTitle.innerHTML = `
                    <span>
                        ${category}
                        <i class="fas fa-chevron-right"></i> <!-- Right arrow icon -->
                    </span>
                    <button onclick="showAllVideos('${category}')">All <i class="fas fa-chevron-right"></i></button>
                `;
                // Make the entire title clickable
                categoryTitle.onclick = () => showAllVideos(category);
                const categoryScroll = document.createElement('div');
                categoryScroll.className = 'category-scroll';
                // Display all videos in the category (no slice limit)
                categoryData.forEach(item => {
                    const frame = createFrame(item);
                    categoryScroll.appendChild(frame);
                });
                categoryContainer.appendChild(categoryTitle);
                categoryContainer.appendChild(categoryScroll);
                container.appendChild(categoryContainer);
            });
        };
        const showDiscoverAndCategories = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            const gridContainer = document.getElementById('grid-container');
            gridContainer.style.display = 'none'; // Hide grid layout
            // Show Discover and Categories sections
            document.getElementById('discover-container').style.display = 'block';
            document.getElementById('categories-container').style.display = 'block';
        };
        const showTrendingVideos = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            const trendingData = data.filter(item => item.trending); // Filter trending videos
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            gridContainer.scrollTop = 0; // Reset grid container scroll
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'grid';
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            // Add trending videos to the grid
            if (trendingData.length > 0) {
                trendingData.forEach(item => {
                    const frame = createFrame(item);
                    gridContainer.appendChild(frame);
                });
            } else {
                showNotification('No trending movies found.', 'warning');
            }
        };
        const showProfileSection = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            gridContainer.scrollTop = 0; // Reset grid container scroll
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'block'; // Use block for list layout
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            // Add profile content using profileApps data
            profileApps.forEach(item => {
                const profileItem = createProfileItem(item);
                gridContainer.appendChild(profileItem);
            });
        };
        const showHomeVideos = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            const homeData = data; // Use the entire data array for home videos
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            gridContainer.scrollTop = 0; // Reset grid container scroll
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'grid';
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            // Add home videos to the grid
            if (homeData.length > 0) {
                homeData.forEach(item => {
                    const frame = createFrame(item);
                    gridContainer.appendChild(frame);
                });
            } else {
                showNotification('No movies found.', 'warning');
            }
        };
        const showMyList = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            gridContainer.scrollTop = 0; // Reset grid container scroll
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'block'; // Use block for list layout
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            // Get saved movies from localStorage
            const savedMoviesData = data.filter(item => savedMovies.includes(item.title));
            
            if (savedMoviesData.length > 0) {
                savedMoviesData.forEach(item => {
                    const listItem = createUnlockedListItem(item);
                    gridContainer.appendChild(listItem);
                });
            } else {
                showNotification('No saved movies found. Save some movies to see them here.', 'warning');
            }
        };
        const createProfileItem = (item) => {
            const profileItem = document.createElement('div');
            profileItem.className = 'profile-item';
            profileItem.style.display = 'flex';
            profileItem.style.alignItems = 'center';
            profileItem.style.gap = '10px';
            profileItem.style.padding = '10px';
            profileItem.style.borderBottom = '1px solid #333';
            const icon = document.createElement('img');
            icon.src = item.icon;
            icon.alt = item.name;
            icon.style.width = '50px';
            icon.style.height = '50px';
            icon.style.borderRadius = '8px';
            const content = document.createElement('div');
            content.style.flex = '1';
            const name = document.createElement('h4');
            name.textContent = item.name;
            name.style.margin = '0';
            name.style.fontSize = '13px';
            name.style.color = '#ccc';
            const description = document.createElement('p');
            description.textContent = item.description;
            description.style.margin = '0';
            description.style.fontSize = '10px';
            description.style.color = '#888';
            const openButton = document.createElement('button');
            openButton.textContent = 'Install';
            openButton.style.backgroundColor = '#00b300';
            openButton.style.color = '#fff';
            openButton.style.border = 'none';
            openButton.style.padding = '6px 12px';
            openButton.style.borderRadius = '5px';
            openButton.style.cursor = 'pointer';
            openButton.style.fontSize = '14px';
            openButton.onclick = () => window.open(item.link, '_blank');
            content.appendChild(name);
            content.appendChild(description);
            profileItem.appendChild(icon);
            profileItem.appendChild(content);
            profileItem.appendChild(openButton);
            return profileItem;
        };
        const createFrame = (item) => {
            const frame = document.createElement('div');
            frame.className = 'frame';
            const img = document.createElement('img');
            img.src = item.imgUrl;
            img.alt = item.title;
            const content = document.createElement('div');
            content.className = 'content';
            const title = document.createElement('h2');
            title.textContent = item.title;
            
            // Add click event to the entire frame
            frame.onclick = () => openVideoNav(item.videoUrl, item.title, item);
            
            content.appendChild(title);
            frame.appendChild(img);
            frame.appendChild(content);
            return frame;
        };
        const createUnlockedListItem = (item) => {
            const listItem = document.createElement('div');
            listItem.className = 'unlocked-item';
            listItem.style.display = 'flex';
            listItem.style.alignItems = 'center';
            listItem.style.gap = '10px';
            listItem.style.padding = '10px';
            listItem.style.borderBottom = '1px solid #333';
            listItem.style.cursor = 'pointer';
            
            const img = document.createElement('img');
            img.src = item.imgUrl;
            img.alt = item.title;
            img.style.width = '80px';
            img.style.height = '115px';
            img.style.objectFit = 'cover';
            img.style.borderRadius = '5px';
            
            const content = document.createElement('div');
            content.style.flex = '1';
            
            const title = document.createElement('h4');
            title.textContent = item.title;
            title.style.margin = '0';
            title.style.fontSize = '14px';
            title.style.color = '#ccc';
            
            const description = document.createElement('p');
            description.textContent = item.description;
            description.style.margin = '0';
            description.style.fontSize = '12px';
            description.style.color = '#777';
            
            // Add click event to the entire list item
            listItem.onclick = () => openVideoNav(item.videoUrl, item.title, item);
            
            content.appendChild(title);
            content.appendChild(description);
            listItem.appendChild(img);
            listItem.appendChild(content);
            return listItem;
        };
        
        // Track current movie in modal
        let currentMovieInModal = null;
        
        const openVideoNav = (videoUrl, videoId, item) => {
            // Display the video navigation modal
            document.getElementById('video-nav').style.display = 'flex';
            
            // Set the video URL in the iframe
            document.getElementById('video-player').src = videoUrl;
            
            // Track current movie
            currentMovieInModal = item;
            
            // Update save button state
            updateSaveButton();
            
            // Push state to history
            if (!inVideoModal) {
                history.pushState({ videoOpen: true }, '');
                inVideoModal = true;
            }
            
            // Check if this is a series with episodes
            const episodeFooter = document.getElementById('episode-footer');
            if (item && item.isSeries && item.seasons) {
                // Show episode footer
                episodeFooter.style.display = 'block';
                
                // Set current season index (if not set, default to 0)
                if (typeof item.currentSeason === 'undefined') {
                    item.currentSeason = 0;
                }
                
                // Update episode title to include season
                document.getElementById('episode-title').textContent = `${item.title} - Season ${item.seasons[item.currentSeason].seasonNumber}`;
                
                // Update episode count for the current season
                document.getElementById('episode-count').textContent = `${item.seasons[item.currentSeason].episodes.length} Episodes`;
                
                // Clear existing episodes
                const episodeScroller = document.getElementById('episode-scroller');
                episodeScroller.innerHTML = '';
                
                // Add Previous Season button if not the first season
                if (item.currentSeason > 0) {
                    const prevSeasonBtn = document.createElement('div');
                    prevSeasonBtn.className = 'season-nav-btn prev-season';
                    prevSeasonBtn.innerHTML = `
                        <span class="season-nav-text">Prev</span>
                        <span class="season-number">S${item.seasons[item.currentSeason - 1].seasonNumber}</span>
                    `;
                    
                    prevSeasonBtn.onclick = () => {
                        goToSeason(item.currentSeason - 1);
                    };
                    
                    episodeScroller.appendChild(prevSeasonBtn);
                }
                
                // Add episode buttons for the current season
                item.seasons[item.currentSeason].episodes.forEach((episode, index) => {
                    const episodeBtn = document.createElement('div');
                    episodeBtn.className = 'episode-btn';
                    if (index === 0) episodeBtn.classList.add('active');
                    
                    const epNum = document.createElement('div');
                    epNum.className = 'ep-num';
                    epNum.textContent = `EP`;
                    
                    const epNumber = document.createElement('div');
                    epNumber.textContent = episode.number;
                    
                    episodeBtn.appendChild(epNum);
                    episodeBtn.appendChild(epNumber);
                    
                    // Add click event
                    episodeBtn.onclick = () => {
                        // Remove active class from all buttons
                        document.querySelectorAll('.episode-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        
                        // Add active class to clicked button
                        episodeBtn.classList.add('active');
                        
                        // Load episode in iframe
                        document.getElementById('video-player').src = episode.url;
                    };
                    
                    episodeScroller.appendChild(episodeBtn);
                });
                
                // Add Next Season button if not the last season
                if (item.currentSeason < item.seasons.length - 1) {
                    const nextSeasonBtn = document.createElement('div');
                    nextSeasonBtn.className = 'season-nav-btn next-season';
                    nextSeasonBtn.innerHTML = `
                        <span class="season-nav-text">Next</span>
                        <span class="season-number">S${item.seasons[item.currentSeason + 1].seasonNumber}</span>
                    `;
                    
                    nextSeasonBtn.onclick = () => {
                        goToSeason(item.currentSeason + 1);
                    };
                    
                    episodeScroller.appendChild(nextSeasonBtn);
                }
            } else {
                // Hide episode footer for non-series content
                episodeFooter.style.display = 'none';
            }
            
            // Add the video to the history
            addToHistory(videoId);
        };
        
        // Function to go to a specific season
        const goToSeason = (seasonIndex) => {
            if (!currentMovieInModal || !currentMovieInModal.isSeries || !currentMovieInModal.seasons) return;
            
            // Update current season
            currentMovieInModal.currentSeason = seasonIndex;
            
            // Update the episode scroller for the new season
            const currentSeason = currentMovieInModal.seasons[seasonIndex];
            document.getElementById('episode-title').textContent = `${currentMovieInModal.title} - Season ${currentSeason.seasonNumber}`;
            document.getElementById('episode-count').textContent = `${currentSeason.episodes.length} Episodes`;
            
            // Clear and repopulate episode scroller
            const episodeScroller = document.getElementById('episode-scroller');
            episodeScroller.innerHTML = '';
            
            // Add Previous Season button if not the first season
            if (seasonIndex > 0) {
                const prevSeasonBtn = document.createElement('div');
                prevSeasonBtn.className = 'season-nav-btn prev-season';
                prevSeasonBtn.innerHTML = `
                    <span class="season-nav-text">PREV</span>
                    <span class="season-number">S${currentMovieInModal.seasons[seasonIndex - 1].seasonNumber}</span>
                `;
                
                prevSeasonBtn.onclick = () => {
                    goToSeason(seasonIndex - 1);
                };
                
                episodeScroller.appendChild(prevSeasonBtn);
            }
            
            // Add episode buttons for the current season
            currentSeason.episodes.forEach((episode, index) => {
                const episodeBtn = document.createElement('div');
                episodeBtn.className = 'episode-btn';
                if (index === 0) episodeBtn.classList.add('active');
                
                const epNum = document.createElement('div');
                epNum.className = 'ep-num';
                epNum.textContent = `EP`;
                
                const epNumber = document.createElement('div');
                epNumber.textContent = episode.number;
                
                episodeBtn.appendChild(epNum);
                episodeBtn.appendChild(epNumber);
                
                episodeBtn.onclick = () => {
                    document.querySelectorAll('.episode-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    episodeBtn.classList.add('active');
                    document.getElementById('video-player').src = episode.url;
                };
                
                episodeScroller.appendChild(episodeBtn);
            });
            
            // Add Next Season button if not the last season
            if (seasonIndex < currentMovieInModal.seasons.length - 1) {
                const nextSeasonBtn = document.createElement('div');
                nextSeasonBtn.className = 'season-nav-btn next-season';
                nextSeasonBtn.innerHTML = `
                    <span class="season-nav-text">NEXT</span>
                    <span class="season-number">S${currentMovieInModal.seasons[seasonIndex + 1].seasonNumber}</span>
                `;
                
                nextSeasonBtn.onclick = () => {
                    goToSeason(seasonIndex + 1);
                };
                
                episodeScroller.appendChild(nextSeasonBtn);
            }
            
            // Load the first episode of the new season
            if (currentSeason.episodes.length > 0) {
                document.getElementById('video-player').src = currentSeason.episodes[0].url;
            }
            
            // Scroll to the beginning of the episode scroller
            episodeScroller.scrollLeft = 0;
        };
        
        // Function to update save button state
        const updateSaveButton = () => {
            const saveBtn = document.getElementById('save-btn');
            if (currentMovieInModal && savedMovies.includes(currentMovieInModal.title)) {
                saveBtn.textContent = 'Unsave';
                saveBtn.style.backgroundColor = '#ff0000';
            } else {
                saveBtn.textContent = 'Save';
                saveBtn.style.backgroundColor = '#00b300';
            }
        };
        
        // Function to toggle save status
        const toggleSaveStatus = () => {
            if (!currentMovieInModal) return;
            
            const movieTitle = currentMovieInModal.title;
            const saveBtn = document.getElementById('save-btn');
            
            if (savedMovies.includes(movieTitle)) {
                // Remove from saved list
                savedMovies = savedMovies.filter(title => title !== movieTitle);
                saveBtn.textContent = 'Save';
                saveBtn.style.backgroundColor = '#00b300';
                showNotification('Removed from My List', 'success');
            } else {
                // Add to saved list
                savedMovies.push(movieTitle);
                saveBtn.textContent = 'Unsave';
                saveBtn.style.backgroundColor = '#ff0000';
                showNotification('Added to My List', 'success');
            }
            
            // Update localStorage
            localStorage.setItem('savedMovies', JSON.stringify(savedMovies));
        };
        
        const addToHistory = (videoId) => {
            const history = JSON.parse(localStorage.getItem('videoHistory')) || [];
            const video = data.find(item => item.title === videoId);
            if (video) {
                // Remove duplicate entries
                const filteredHistory = history.filter(item => item.title !== videoId);
                // Add the new entry at the beginning
                filteredHistory.unshift(video);
                // Save the updated history
                localStorage.setItem('videoHistory', JSON.stringify(filteredHistory));
                // Update the history list
                updateHistoryList();
            }
        };
        const updateHistoryList = () => {
            const history = JSON.parse(localStorage.getItem('videoHistory')) || [];
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            if (history.length === 0) {
                historyList.innerHTML = '<p>No history available.</p>';
                return;
            }
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                const img = document.createElement('img');
                img.src = item.imgUrl;
                img.alt = item.title;
                const content = document.createElement('div');
                content.className = 'content';
                content.innerHTML = `
                    <h4>${item.title}</h4>
                    <p>${item.description}</p>
                `;
                
                // Add click event to the entire history item
                historyItem.onclick = () => openVideoNav(item.videoUrl, item.title, item);
                
                historyItem.appendChild(img);
                historyItem.appendChild(content);
                historyList.appendChild(historyItem);
            });
        };
        const clearHistory = () => {
            localStorage.removeItem('videoHistory');
            updateHistoryList();
            showNotification('All history has been cleared.', 'success');
        };
        const showAllVideos = (category) => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            const categoryData = data.filter(item => item.category === category);
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            gridContainer.scrollTop = 0; // Reset grid container scroll
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'grid';
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            // Add videos to the grid
            categoryData.forEach(item => {
                const frame = createFrame(item);
                gridContainer.appendChild(frame);
            });
        };
        const handleSearch = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            const searchTerm = document.getElementById('search-bar').value.toLowerCase();
            const filteredData = data.filter(item => item.title.toLowerCase().includes(searchTerm));
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            gridContainer.scrollTop = 0; // Reset grid container scroll
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'grid';
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            // Add search results to the grid
            if (filteredData.length > 0) {
                filteredData.forEach(item => {
                    const frame = createFrame(item);
                    gridContainer.appendChild(frame);
                });
            } else {
                showNotification('No movies found.', 'warning');
            }
        };
        const showNotification = (message, type) => {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            notification.style.position = 'fixed';
            notification.style.top = '50%';
            notification.style.left = '50%';
            notification.style.transform = 'translate(-50%, -50%)';
            notification.style.zIndex = '9999';
            setTimeout(() => {
                notification.remove();
            }, 3000);
        };
        
        // Function to close the modal
        const closeModal = () => {
            document.getElementById('video-nav').style.display = 'none';
            document.getElementById('video-player').src = '';
            currentMovieInModal = null;
            inVideoModal = false;
        };
        
        const closeNav = () => {
            // Only go back in history if we're in the video modal
            if (inVideoModal) {
                history.back();
            } else {
                // If not in video modal state, just close the modal
                closeModal();
            }
        };
        
        // Carousel functionality
        let currentIndex = 0;
        let startX = 0;
        let moveX = 0;
        let isDragging = false;
        
        function updateCarousel() {
            const carousel = document.getElementById("carousel");
            carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
            document.querySelectorAll(".dot").forEach((dot, index) => {
                dot.classList.toggle("active", index === currentIndex);
            });
        }
        
        function goToSlide(index) {
            currentIndex = index;
            updateCarousel();
        }
        
        function nextSlide() {
            const carouselData = data.slice(0, 5);
            currentIndex = (currentIndex + 1) % carouselData.length;
            updateCarousel();
        }
        
        function prevSlide() {
            const carouselData = data.slice(0, 5);
            currentIndex = (currentIndex - 1 + carouselData.length) % carouselData.length;
            updateCarousel();
        }
        
        function handleTouchStart(e) {
            startX = e.touches[0].clientX;
            isDragging = true;
        }
        
        function handleTouchMove(e) {
            if (!isDragging) return;
            moveX = e.touches[0].clientX - startX;
        }
        
        function handleTouchEnd() {
            isDragging = false;
            if (moveX > 50) {
                prevSlide();
            } else if (moveX < -50) {
                nextSlide();
            }
        }
        
        function handleMouseDown(e) {
            startX = e.clientX;
            isDragging = true;
        }
        
        function handleMouseMove(e) {
            if (!isDragging) return;
            moveX = e.clientX - startX;
        }
        
        function handleMouseUp() {
            isDragging = false;
            if (moveX > 50) {
                prevSlide();
            } else if (moveX < -50) {
                nextSlide();
            }
        }
        
        // Initialize carousel event listeners
        function initCarousel() {
            const carousel = document.getElementById("carousel");
            carousel.addEventListener("touchstart", handleTouchStart);
            carousel.addEventListener("touchmove", handleTouchMove);
            carousel.addEventListener("touchend", handleTouchEnd);
            carousel.addEventListener("mousedown", handleMouseDown);
            carousel.addEventListener("mousemove", handleMouseMove);
            carousel.addEventListener("mouseup", handleMouseUp);
            carousel.addEventListener("mouseleave", handleMouseUp);
            
            // Auto-slide every 5 seconds
            setInterval(nextSlide, 5000);
        }
        
        // Initialize the page
        createCarousel();
        createDiscoverSection();
        createCategories();
        updateHistoryList();
        initCarousel();
        
        let lastScrollTop = 0;
        window.addEventListener('scroll', () => {
            const footer = document.querySelector('footer');
            const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            // Check if user has reached the bottom of the page
            const atPageEnd = (currentScrollTop + windowHeight) >= documentHeight;
            if (atPageEnd && currentScrollTop > lastScrollTop) {
                // Immediately hide footer when at the end of the page and scrolling down
                footer.classList.add('hide');
            } else {
                // Show footer when scrolling down anywhere else or when scrolling up
                footer.classList.remove('hide');
            }
            lastScrollTop = currentScrollTop;
        });
        // Fixed: Changed timeout value to something more reasonable (40 seconds)
        setTimeout(() => {
            const bar = document.getElementById('notification-bar');
            bar.style.opacity = '1';
            bar.style.pointerEvents = 'auto'; // Enable interaction once visible
        }, 40000); // Show after 40 seconds
        function closeNotification() {
            const bar = document.getElementById('notification-bar');
            bar.style.opacity = '0';
            bar.style.pointerEvents = 'none'; // Disable interaction immediately
            setTimeout(() => {
                bar.remove(); // Fully remove from DOM
            }, 500); // Allow fade-out to complete
        }
        
        const partnersData = [
            { imgUrl: "https://short-link.me/QSiT", videoUrl: "https://youtube.com/embed/3_i60BLtN_s", title: "NEW RELEASE" },
            { imgUrl: "https://short-link.me/TsCr", videoUrl: "https://youtube.com/embed/CumW3IY1mMg", title: "BLOCKBUSTER" },
            { imgUrl: "https://short-link.me/TsDp", videoUrl: "https://youtube.com/embed/SFtKVKoscqA", title: "PREMIERE" },
            { imgUrl: "https://short-link.me/TsEy", videoUrl: "https://youtube.com/embed/hJzZRl1C8X0", title: "EXCLUSIVE" },
            { imgUrl: "https://short-link.me/TsFN", videoUrl: "https://youtube.com/embed/BjkncLAZu80", title: "HOT MOVIE" },
        ];
        const partnersScroll = document.getElementById('partners-scroll');
        // Function to create the partner items
        const createPartnersSection = () => {
            partnersScroll.innerHTML = '';
            partnersData.forEach(partner => {
                const partnerItem = document.createElement('div');
                partnerItem.className = 'partner-item';
                const img = document.createElement('img');
                img.src = partner.imgUrl;
                img.alt = 'Partner Logo';
                img.loading = 'lazy';
                const title = document.createElement('div');
                title.className = 'partner-title';
                title.textContent = partner.title;
                partnerItem.appendChild(img);
                partnerItem.appendChild(title);
                partnersScroll.appendChild(partnerItem);
                // Open video in a new tab when clicked
                partnerItem.addEventListener('click', () => {
                    window.open(partner.videoUrl, '_blank');
                });
            });
        };
        // Auto-scroll function
        let scrollIndex = 0;
        let autoScrollActive = true;
        let scrollTimeout;
        const autoScroll = () => {
            if (!autoScrollActive) return;
            const items = document.querySelectorAll('.partner-item');
            if (items.length === 0) return;
            scrollIndex = (scrollIndex + 1) % items.length;
            const nextItem = items[scrollIndex];
            partnersScroll.scrollTo({
                left: nextItem.offsetLeft,
                behavior: 'smooth'
            });
        };
        // Detect manual scroll and pause auto-scrolling for 5 seconds
        partnersScroll.addEventListener('scroll', () => {
            autoScrollActive = false;
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                autoScrollActive = true;
            }, 4000);
        });
        // Initialize the section
        createPartnersSection();
        // Start auto-scrolling every 10 seconds
        setInterval(autoScroll, 1000);
        
        // New functions for added features
        
        // Apply filters
        const applyFilters = () => {
            // Reset scroll position
            window.scrollTo(0, 0);
            
            // Set flag and push state for grid view
            inGridView = true;
            history.pushState({ gridView: true }, '');
            
            // Get selected filters
            const selectedCategory = document.querySelector('.filter-option[data-category].active')?.dataset.category || 'All';
            const selectedSort = document.querySelector('.filter-option[data-sort].active')?.dataset.sort || 'Newest';
            
            // Apply filters to data
            let filteredData = data;
            
            if (selectedCategory !== 'All') {
                filteredData = filteredData.filter(item => item.category === selectedCategory);
            }
            
            // Sort data
            if (selectedSort === 'Newest') {
                filteredData.sort((a, b) => b.id - a.id);
            } else if (selectedSort === 'Popular') {
                filteredData.sort((a, b) => b.views - a.views);
            } else if (selectedSort === 'Rating') {
                filteredData.sort((a, b) => b.rating - a.rating);
            } else if (selectedSort === 'A-Z') {
                filteredData.sort((a, b) => a.title.localeCompare(b.title));
            }
            
            // Update UI with filtered data
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            
            // Hide other sections
            document.getElementById('discover-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'none';
            gridContainer.style.display = 'grid';
            
            // Add a back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back to Categories';
            backButton.style.marginBottom = '10px';
            backButton.style.padding = '10px';
            backButton.style.backgroundColor = '#ddd';
            backButton.style.color = '#333';
            backButton.style.border = 'none';
            backButton.style.borderRadius = '5px';
            backButton.style.cursor = 'pointer';
            backButton.onclick = () => history.back();
            gridContainer.appendChild(backButton);
            
            filteredData.forEach(item => {
                const frame = createFrame(item);
                gridContainer.appendChild(frame);
            });
            
            // Close filter modal
            toggleFilterModal();
        };
        
        // Share movie function
        const shareMovie = () => {
            // Create a URL with video ID parameter
            const url = new URL(window.location.href);
            url.searchParams.set('videoId', currentMovieInModal.id);
            const shareUrl = url.toString();
            
            if (navigator.share) {
                navigator.share({
                    title: currentMovieInModal.title,
                    text: 'Check out this movie on Hausa Movies!',
                    url: shareUrl
                })
                .then(() => console.log('Shared successfully'))
                .catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback - copy to clipboard
                const dummy = document.createElement('input');
                document.body.appendChild(dummy);
                dummy.value = shareUrl;
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
                showNotification('Link copied to clipboard!', 'success');
            }
        };
        
        // Download movie function - updated to visit arewa.com
        const downloadMovie = () => {
            // Open the arewa.com link in a new tab
            window.open('http://arewa.com', '_blank');
        };
        
        // Open Edit Profile Modal
        const openEditProfileModal = () => {
            const editProfileModal = document.getElementById('edit-profile-modal');
            editProfileModal.classList.add('open');
            
            // Set current user name in input
            document.getElementById('user-name-input').value = userProfile.name;
            
            // Set selected avatar
            document.querySelectorAll('.avatar-option').forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.avatar === userProfile.avatar) {
                    option.classList.add('selected');
                }
            });
        };
        
        // Close Edit Profile Modal
        const closeEditProfileModal = () => {
            const editProfileModal = document.getElementById('edit-profile-modal');
            editProfileModal.classList.remove('open');
        };
        
        // Save Profile
        const saveProfile = () => {
            // Get selected avatar
            const selectedAvatar = document.querySelector('.avatar-option.selected');
            if (selectedAvatar) {
                userProfile.avatar = selectedAvatar.dataset.avatar;
            }
            
            // Get user name
            const userName = document.getElementById('user-name-input').value;
            if (userName.trim() !== '') {
                userProfile.name = userName.trim();
            }
            
            // Save to localStorage
            localStorage.setItem('userProfile', JSON.stringify(userProfile));
            
            // Update UI
            updateUserProfile();
            
            // Close modal
            closeEditProfileModal();
            
            // Show notification
            showNotification('Profile updated successfully!', 'success');
        };
        
        // Update User Profile UI
        const updateUserProfile = () => {
            // Update user name
            document.getElementById('user-name').textContent = userProfile.name;
            
            // Update user avatar
            const userAvatar = document.getElementById('user-avatar');
            userAvatar.innerHTML = '';
            
            if (userProfile.avatar) {
                const avatarImg = document.createElement('img');
                avatarImg.src = getAvatarUrl(userProfile.avatar);
                avatarImg.alt = 'User Avatar';
                userAvatar.appendChild(avatarImg);
            } else {
                const defaultIcon = document.createElement('i');
                defaultIcon.className = 'fas fa-user';
                defaultIcon.style.fontSize = '36px';
                userAvatar.appendChild(defaultIcon);
            }
        };
        
        // Get Avatar URL by ID
        const getAvatarUrl = (avatarId) => {
            const avatars = {
                '1': 'https://cdn-icons-png.flaticon.com/128/6997/6997666.png',
                '2': 'https://cdn-icons-png.flaticon.com/128/6997/6997662.png',
                '3': 'https://cdn-icons-png.flaticon.com/128/6997/6997661.png',
                '4': 'https://cdn-icons-png.flaticon.com/128/6997/6997664.png'
            };
            return avatars[avatarId] || avatars['1'];
        };
        
        // Function to check for video ID in URL and open video modal
        const checkVideoIdInUrl = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('videoId');
            
            if (videoId) {
                const video = data.find(item => item.id == videoId);
                if (video) {
                    // Wait a bit to ensure the page is fully loaded
                    setTimeout(() => {
                        openVideoNav(video.videoUrl, video.title, video);
                    }, 500);
                }
            }
        };
        
        // Initialize all new features when the page loads
        window.addEventListener('load', () => {
            // Initialize filter options
            document.querySelectorAll('.filter-option').forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from siblings in the same filter-options container
                    const siblings = this.parentElement.querySelectorAll('.filter-option');
                    siblings.forEach(sib => sib.classList.remove('active'));
                    // Add active class to clicked option
                    this.classList.add('active');
                });
            });
            
            // Initialize avatar options
            document.querySelectorAll('.avatar-option').forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    document.querySelectorAll('.avatar-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    // Add selected class to clicked option
                    this.classList.add('selected');
                });
            });
            
            // Update user profile UI
            updateUserProfile();
            
            // Check for video ID in URL
            checkVideoIdInUrl();
            
            // Add history state handling
            window.addEventListener('popstate', (event) => {
                // Handle video modal
                if (inVideoModal) {
                    closeModal();
                } 
                // Handle grid view
                else if (inGridView) {
                    inGridView = false;
                    showDiscoverAndCategories();
                }
                // Handle filter modal
                else if (inFilterModal) {
                    document.getElementById('filter-modal').classList.remove('open');
                    inFilterModal = false;
                }
                // Handle history modal
                else if (inHistoryModal) {
                    document.getElementById('history-modal').classList.remove('open');
                    inHistoryModal = false;
                }
                // Handle sidebar modal
                else if (inSidebarModal) {
                    document.getElementById('sidebar-modal').classList.remove('open');
                    inSidebarModal = false;
                }
            });
        });
        
        // Ad logic
      const adContainer = document.getElementById('adContainer');
      const adContent = document.getElementById('adContent');
      const installButton = document.getElementById('installButton');
      let currentAdIndex = parseInt(localStorage.getItem('currentAdIndex')) || 0;
      function showAd(index) {
        const app = adsData[index];
        adContent.innerHTML = `
          <div class="app-icon">
            <img src="${app.icon}" alt="App Icon" />
          </div>
          <div class="ad-info">
            <div class="app-name">${app.name}</div>
            <div class="ad-meta">
              <span class="sponsored">Sponsored ·</span>
              <span>${app.rating} ★ FREE</span>
            </div>
          </div>
        `;
        installButton.href = app.link;
        adContainer.style.display = 'flex';
        localStorage.setItem('currentAdIndex', index);
      }
      function rotateAds() {
        showAd(currentAdIndex);
        currentAdIndex = (currentAdIndex + 1) % adsData.length;
      }
      // Show first ad immediately and rotate
      rotateAds();
      setInterval(rotateAds, 15000);
    </script>
</body>
</html>
